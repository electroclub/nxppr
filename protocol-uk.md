# Протокол обміну з віддаленим адаптером USB-DMX512

Обмін відбувається по технології клієнт-сервер.
Серверна сторона - це хост (в термінології TCP/IP), до якого приєднаний адаптер USB-DMX512.
Порт для обміну на серверній стороні: 3210.

Сервер після приєднання виконує команди клієнта.
Формат команд - символьний (один байт - один символ), закінчується команда символом \n (код 10, 0x0A).
Перший символ - команда. Числові дані представлені в hex-форматі.

Команди:

#### Завершити обмін

Клієнт:

q\n

Сервер: не відповідає, закриває з'єднання


#### Дати інформацію про кількість DMX-інтерфейсів, приєднаних до сервера

Клієнт:

с\n

Сервер:

сxx\n

xx- кількість DMX-інтерфейсів


#### Дати інформацію про DMX-інтерфейс

Клієнт:

ixx\n

xx - номер DMX-інтерфейсу на сервері

Сервер:

iyyt\n

yy - внутрішній номер інтерфейсу
t  - тип інтерфейсу (може бути i або o, тобто вхідний чи вихідний)

Внутрішній номер інтерфейсу - це прописаний в пам'яті адаптера його номер (адрес) 
Прописується в адаптері окремо, не може перевищувати 127.
Якщо адаптер не підтримує таку опцію,
то повертається значення ff 

#### Записати значення в DMX-канал

waaaabb\n

aaaa - адрес даних
bb   - дані

Адрес містить номер DMX-інтерфейса (старші 7 бітів, діапазон: 0..127) і номер каналу (молодші 9 бітів, діапазон: 0..511).

Сервер: не відповідає, дані передає в відповідний DMX-інтерфейс.

#### Запит значення DMX-каналу

gaaaa\n

aaaa - адрес каналу (номер інтерфейса + номер DMX-каналу)

Сервер:

gaaaabb\n

aaaa - адрес каналу (номер інтерфейса + номер DMX-каналу)
bb   - дані

#### Повідомлення від сервера про зміну конфігурації

Сервер:

a\n

Сервер повідомляє, що відбулись зміни в конфігурації USB-DMX адаптерів (під'єднано/від'єднано адаптер)


### Список команд:
* a - **A**lert
* q - **Q**uit
* c - get dmx-interfaces **C**ount
* i - get **I**nfo
* w - **W**rite data
* g - **G**et data
